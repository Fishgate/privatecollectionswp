function updateViewportDimensions(){var e=window,t=document,i=t.documentElement,a=t.getElementsByTagName("body")[0],n=e.innerWidth||i.clientWidth||a.clientWidth,r=e.innerHeight||i.clientHeight||a.clientHeight;return{width:n,height:r}}function loadGravatars(){viewport=updateViewportDimensions(),viewport.width>=768&&jQuery(".comment img[data-gravatar]").each(function(){jQuery(this).attr("src",jQuery(this).attr("data-gravatar"))})}var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(t,i,a){a||(a="Don't call this twice without a uniqueId"),e[a]&&clearTimeout(e[a]),e[a]=setTimeout(t,i)}}(),timeToWaitForLast=100;jQuery(document).ready(function(e){function t(){viewport=updateViewportDimensions(),currentHeight=e("#main").height(),diff=viewport.height-currentHeight,headerheight=e(".header").height(),visible=e("#content-measure").visible(),visible?e("#main").css({height:currentHeight-headerheight+diff}):e("#main").removeAttr("style")}loadGravatars(),e(".album-feature .img-overlay-panel .overlay p").flowtype({minimum:74,maximum:95,fontRatio:9}),viewport=updateViewportDimensions();var i=e.parseJSON(site_data.bg_slideshow);viewport.width>=768&&e.supersized({slide_interval:1e4,transition:1,transition_speed:1e3,slides:i}),e("#carousel").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:160,itemMargin:10,asNavFor:"#slider"}),e("#slider").flexslider({animation:"fade",controlNav:!1,animationLoop:!1,slideshow:!1,sync:"#carousel"}),e(".slider .img-overlay-panel").bind({mouseenter:function(){overlay_height=e("#gallery-images .slider .img-overlay-panel .overlay").height(),e("#gallery-images .slider .img-overlay-panel .overlay p").css({"margin-top":overlay_height/2-10}),e(this).find(".overlay").stop().fadeIn()},mouseleave:function(){e(this).find(".overlay").stop().fadeOut()}}),e(".img-overlay-panel .overlay").click(function(){current_prod=e(this).parent().data("prod-code"),console.log(current_prod)}),e("#content-measure").length>0&&(t(),e("#main").addClass("main-dim")),e(window).resize(function(){e("#content-measure").length>0&&t()})});