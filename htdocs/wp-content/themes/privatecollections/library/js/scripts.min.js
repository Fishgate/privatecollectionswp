function updateViewportDimensions(){var e=window,t=document,i=t.documentElement,o=t.getElementsByTagName("body")[0],a=e.innerWidth||i.clientWidth||o.clientWidth,n=e.innerHeight||i.clientHeight||o.clientHeight;return{width:a,height:n}}function loadGravatars(){viewport=updateViewportDimensions(),viewport.width>=768&&jQuery(".comment img[data-gravatar]").each(function(){jQuery(this).attr("src",jQuery(this).attr("data-gravatar"))})}var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(t,i,o){o||(o="Don't call this twice without a uniqueId"),e[o]&&clearTimeout(e[o]),e[o]=setTimeout(t,i)}}(),timeToWaitForLast=100;jQuery(document).ready(function(e){function t(t){e.supersized({slide_interval:5e3,transition:1,transition_speed:1e3,slides:t})}function i(){viewport=updateViewportDimensions(),viewport.width>=1030?vars.is_paused&&api.playToggle():vars.is_paused||api.playToggle()}function o(){viewport=updateViewportDimensions(),viewport.width>=768&&e("#menu-main-menu").removeAttr("style")}function a(e){return session_set=sessionStorage.getItem(e),null!==session_set?!0:!1}function n(){e(".img-overlay-panel .overlay p").html("This piece has been pinned to your enquiry list.")}function r(){sessionStorage.length>0&&e(".nav li.enquire a").addClass("update").attr("data-content",sessionStorage.length)}function s(){viewport=updateViewportDimensions(),currentHeight=e("#main").height(),diff=viewport.height-currentHeight,headerheight=e(".header").height(),visible=e("#content-measure").visible(),visible?viewport.width>=1030?e("#main").css({height:currentHeight-headerheight+diff}):e("#main").removeAttr("style"):e("#main").removeAttr("style")}if(loadGravatars(),e(".album-feature p").flowtype({minimum:74,maximum:95,fontRatio:8}),t(e.parseJSON(site_data.bg_slideshow)),i(),e("#carousel").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:160,itemMargin:10,asNavFor:"#slider",prevText:"",nextText:""}),e("#slider").flexslider({directionNav:!1,controlNav:!1,slideshow:!1,sync:"#carousel"}),e(".header-bg .mobile-menu-dropdown").click(function(){e(".nav").toggle()}),e(".slider .img-overlay-panel").bind({mouseenter:function(){viewport=updateViewportDimensions(),viewport.width>=1030&&(overlay_height=e("#gallery-images .slider .img-overlay-panel .overlay").height(),e("#gallery-images .slider .img-overlay-panel .overlay p").css({"margin-top":overlay_height/2-10}),e(this).find(".overlay").stop().fadeIn())},mouseleave:function(){viewport=updateViewportDimensions(),viewport.width>=1030&&e(this).find(".overlay").stop().fadeOut()}}),r(),e("#gallery-images .slider").length>0&&(prod_code=e(".img-overlay-panel").data("prod-code"),is_pinned=a(prod_code),is_pinned&&n()),e(".img-overlay-panel .overlay").click(function(){viewport=updateViewportDimensions(),viewport.width>=1030&&!is_pinned&&(prod_code=e(this).parent().data("prod-code"),prod_thumbnail=e(this).parent().data("prod-thumbnail"),sessionStorage.setItem(prod_code,prod_thumbnail),n(),r())}),e("#pc-contact-form").length>0&&sessionStorage.length>0)for(var d=0;d<sessionStorage.length;d++){var l=sessionStorage.key(d),p=sessionStorage.getItem(l);e("#pc-contact-form .cart-container").append('<div class="m-session-1of3 t-session-1of6 d-session-1of6"><img data-prod-code="'+l+'" class="flex" src="'+p+'" /></div>')}e("#content-measure").length>0&&(s(),e("#main").addClass("main-dim"),e(".header-bg").css("background","rgba(0,0,0,0.87")),e(".category-dropdown").click(function(){state=e(this).data("state"),"closed"===state?(e(this).data("state","open"),e(".category-dropdown ul").removeClass("invisible"),e(".category-dropdown div h2 i").removeClass("fa-angle-down").addClass("fa-angle-up")):"open"===state&&(e(this).data("state","closed"),e(".category-dropdown ul").addClass("invisible"),e(".category-dropdown div h2 i").removeClass("fa-angle-up").addClass("fa-angle-down"))}),viewport.width>=1030&&e("#gallery-thumbs").perfectScrollbar({suppressScrollX:!0}),e(window).resize(function(){e("#content-measure").length>0&&s(),i(),o()})});